{% load static %}
{% comment %} components/recipe_card.html {% endcomment %}

<div class="aspect-square bg-white p-2"> <!-- external padding -->
  <div class="border-2 border-black p-2 bg-white w-full h-full flex flex-col justify-between group relative" style="font-family: 'Inclusive Sans', sans-serif;"> <!-- black line inside square -->

    <!-- Bookmark on the right with a transition on hover -->
    <button class="bookmark-btn absolute top-1 right-1 w-8 h-8 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10" aria-label="Toggle bookmark" type="button">
      <img class="bookmark-icon w-full h-full transition-opacity duration-200" src="{% static 'icons/bookmark-white.png' %}" alt="Bookmark">
    </button>

    <!-- recipe name -->
    <div class="flex-1 flex flex-col">
      <h2 class="text-l text-center font-bold mb-2">Melanzane alla Parmigiana</h2>

      <!-- recipe image -->
      <div class="mb-2">
        <img src="https://d2sj0xby2hzqoy.cloudfront.net/kenwood_italy/attachments/data/000/008/122/medium/parmigiana-di-melanzane.jpg" alt="Melanzane alla Parmigiana" class="w-full object-cover border border-gray-300">
      </div>

      <!-- tags -->
      <div class="flex gap-1 flex-1 items-stretch overflow-hidden">
        <div class="flex flex-col justify-between w-1/2 text-[8px] overflow-hidden h-full">
          <div>
            <!-- difficulty, time and cost tags -->
            <div class="flex items-center justify-start gap-1 mb-1">
              <div class="flex items-center space-x-1"><img src="{% static 'icons/difficulty.png' %}" class="w-4 h-4"><span>Easy</span></div>
              <div class="flex items-center space-x-1"><img src="{% static 'icons/time.png' %}" class="w-4 h-4"><span>Medium</span></div>
              <div class="flex items-center space-x-1"><img src="{% static 'icons/cost.png' %}" class="w-4 h-4"><span>Average</span></div>
            </div>

            <!-- general tags -->
            <div class="flex items-center gap-1">
              <span class="font-semibold">Tags:</span>
              <div class="flex gap-1">
                <img src="{% static 'icons/boil.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/lactose-free.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/gluten-free.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/vegetarian.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/vegan.png' %}" class="w-4 h-4">
              </div>
            </div>

            <!-- ingredients -->
            <div class="flex items-center gap-1 mt-1">
              <span class="font-semibold">Ingredients:</span>
              <div class="flex gap-1">
                <img src="{% static 'icons/meat.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/cheese.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/vegetables.png' %}" class="w-4 h-4">
              </div>
            </div>
          </div>
        </div>

        <!-- central divider -->
        <div class="w-px bg-black"></div>

        <!-- recipe description -->
        <div class="w-1/2 text-[8px] overflow-auto h-full">
          <p class="leading-tight">
            Melanzane alla Parmigiana is a classic Italian baked dish made with layers of thinly sliced eggplant, tomato sauce, and cheese—typically mozzarella and Parmesan—baked until bubbly and golden. It’s rich, hearty, and full of traditional Southern Italian flavor.
          </p>
        </div>
      </div>
    </div>

    <!-- stars -->
    <div class="flex justify-center space-x-1 text-xl">
      <span class="text-yellow-500">★</span>
      <span class="text-yellow-500">★</span>
      <span class="text-yellow-500">★</span>
      <span class="text-yellow-500">★</span>
      <span class="text-black">★</span>
    </div>
  </div>
</div>


<!-- script for the bookmark button -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.bookmark-btn');

    buttons.forEach(btn => {
      const icon = btn.querySelector('.bookmark-icon');
      let bookmarked = false;

      btn.addEventListener('click', function (e) {
        e.preventDefault();
        bookmarked = !bookmarked;

        if (bookmarked) {
          icon.src = "{% static 'icons/bookmark-black.png' %}";
          btn.classList.remove("opacity-0", "group-hover:opacity-100");
          btn.classList.add("opacity-100");
        } else {
          icon.src = "{% static 'icons/bookmark-white.png' %}";
          btn.classList.remove("opacity-100");
          btn.classList.add("opacity-0", "group-hover:opacity-100");
        }
      });

      btn.addEventListener('mouseenter', function () {
        if (!bookmarked) {
          icon.src = "{% static 'icons/bookmark-black.png' %}";
        }
      });

      btn.addEventListener('mouseleave', function () {
        if (!bookmarked) {
          icon.src = "{% static 'icons/bookmark-white.png' %}";
        }
      });
    });
  });
</script>
