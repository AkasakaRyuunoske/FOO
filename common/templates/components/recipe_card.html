{% load static %}
{% comment %} components/recipe_card.html {% endcomment %}

<div class="aspect-[4/3] sm:aspect-square bg-white p-2 rounded-md"> <!-- External Padding -->
  <div class="border-2 border-black p-3 bg-white w-full h-full flex flex-col justify-between group relative rounded" style="font-family:'Inclusive Sans',sans-serif;"> <!-- Black line inside square -->

    <!-- Bookmark on the right with a transition on hover -->
    <button class="bookmark-btn absolute top-1 right-1 aspect-square w-8 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10" aria-label="Toggle bookmark" type="button">
      <img class="bookmark-icon w-full h-full transition-opacity duration-200" src="{% static 'icons/bookmark-white.png' %}" alt="Bookmark">
    </button>

    <!-- Recipe Name -->
    <div class="flex-1 flex flex-col">
      <h2 class="text-center font-bold mb-2 text-sm sm:text-base md:text-lg">Melanzane alla Parmigiana</h2>

      <!-- Recipe Image -->
      <div class="w-4/5 mx-auto mb-2">
        <img src="https://d2sj0xby2hzqoy.cloudfront.net/kenwood_italy/attachments/data/000/008/122/medium/parmigiana-di-melanzane.jpg" alt="Melanzane alla Parmigiana" class="w-full h-auto object-contain border border-gray-300 rounded">
      </div> <!-- image is 1055*608, consider it when putting other images -->

      <!-- Info & Tags -->
      <div class="flex gap-2 flex-1 items-stretch overflow-hidden text-[8px] md:text-[10px]">
        <!-- Left Section -->
        <div class="flex flex-col justify-between w-1/2 overflow-hidden h-full space-y-2">
          <!-- Tags with text -->
          <div class="space-y-1">
            <!-- Difficulty, Time and Cost Tags -->
            <div class="flex flex-wrap gap-x-2 gap-y-1">
              <div class="flex items-center gap-1"><img src="{% static 'icons/difficulty.png' %}" class="w-4 h-4"><span>Easy</span></div>
              <div class="flex items-center gap-1"><img src="{% static 'icons/time.png' %}" class="w-4 h-4"><span>Medium</span></div>
              <div class="flex items-center gap-1"><img src="{% static 'icons/cost.png' %}" class="w-4 h-4"><span>Average</span></div>
            </div>

            <!-- General Tags -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-semibold">Tags:</span>
              <div class="flex flex-wrap gap-1">
                <img src="{% static 'icons/boil.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/lactose-free.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/gluten-free.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/vegetarian.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/vegan.png' %}" class="w-4 h-4">
              </div>
            </div>

            <!-- Ingredients -->
            <div class="flex items-center gap-2 flex-wrap">
              <span class="font-semibold">Ingredients:</span>
              <div class="flex flex-wrap gap-1">
                <img src="{% static 'icons/meat.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/cheese.png' %}" class="w-4 h-4">
                <img src="{% static 'icons/vegetables.png' %}" class="w-4 h-4">
              </div>
            </div>
          </div>
        </div>

        <!-- Central Divider -->
        <div class="w-px bg-black"></div>

        <!-- Right Section: Description -->
        <div class="w-1/2  overflow-auto h-full">
          <p class="leading-tight text-[8px] md:text-[9px]">
            Melanzane alla Parmigiana is a classic Italian baked dish made with layers of thinly sliced eggplant, tomato sauce, and cheese—typically mozzarella and Parmesan—baked until bubbly and golden. It’s rich, hearty, and full of traditional Southern Italian flavor.
          </p>
        </div>
      </div>
    </div>

    <!-- Stars -->
    <div class="flex justify-center space-x-1 text-base sm:text-lg">
      <span class="text-yellow-500">★</span>
      <span class="text-yellow-500">★</span>
      <span class="text-yellow-500">★</span>
      <span class="text-yellow-500">★</span>
      <span class="text-black">★</span>
    </div>
  </div>
</div>

<!-- Script for the Bookmark button -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.bookmark-btn');

    buttons.forEach(btn => {
      const icon = btn.querySelector('.bookmark-icon');
      let bookmarked = false;

      btn.addEventListener('click', function (e) {
        e.preventDefault();
        bookmarked = !bookmarked;

        if (bookmarked) {
          icon.src = "{% static 'icons/bookmark-black.png' %}";
          btn.classList.remove("opacity-0", "group-hover:opacity-100");
          btn.classList.add("opacity-100");
        } else {
          icon.src = "{% static 'icons/bookmark-white.png' %}";
          btn.classList.remove("opacity-100");
          btn.classList.add("opacity-0", "group-hover:opacity-100");
        }
      });

      btn.addEventListener('mouseenter', function () {
        if (!bookmarked) {
          icon.src = "{% static 'icons/bookmark-black.png' %}";
        }
      });

      btn.addEventListener('mouseleave', function () {
        if (!bookmarked) {
          icon.src = "{% static 'icons/bookmark-white.png' %}";
        }
      });
    });
  });
</script>
